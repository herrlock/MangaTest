
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'distribution'

group 'de.herrlock.manga'
version '1.0.0-SNAPSHOT'

dependencies {
	compile 'com.google.guava:guava:19.0'
	compile 'org.apache.logging.log4j:log4j-api:2.6.1'
	runtime 'org.apache.logging.log4j:log4j-core:2.6.1'
}

repositories {
	mavenCentral()
}

jar.manifest {
	attributes 'Main-Class' : 'de.herrlock.manga.TestMain',
		'Class-Path' : project.configurations.runtime
			.collect{ file -> "lib/${file.name}" }
			.sort{ it.toLowerCase() }
			.join(' ')
	attributes 'Built-At' : new Date(),
		'Built-With' : GradleVersion.current(),
		'Created-By' : "${System.properties.'java.runtime.version'} (${System.properties.'java.vm.vendor'})",
		'Info'
}

distributions {
	main {
		baseName = project.name
		version = project.version
		contents {
			from jar.outputs
			into('lib') {
				from configurations.runtime
			}
		}
	}
}

task dist(dependsOn: [distZip, distTar], group: 'Distribution', description: 'Run distZip and distTar') {
	// does nothing itself
}
tasks.withType(Tar) {
	compression = Compression.GZIP
}
